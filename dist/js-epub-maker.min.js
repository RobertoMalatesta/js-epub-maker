!function e(t,n,i){function o(u,s){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!s&&f)return f(u,!0);if(r)return r(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(e,t,n){!function(){"use strict";var i="undefined"!=typeof console&&console.debug?console.debug:function(){},o=e("./js/slugify.js"),r={"idpf-wasteland":e("../src/js/template-builders/idpf-wasteland-builder.js").builder},u=function(){var e=this,t={};this.withTemplate=function(n){return t.templateName=n,e},this.withTitle=function(n){return t.title=n,t.slug=o(n),e},this.withLanguage=function(n){return t.lang=n,e},this.withAuthor=function(n){return t.author=n,e},this.withModificationDate=function(n){return t.modificationDate=n.toISOString(),e},this.withCover=function(){return t.cover=!0,e},this.withRights=function(n){return t.rights=n,e},this.withCoverRights=function(n){return t.coverRights=n,e},this.withAttributionUrl=function(t){return this.attributionUrl=t,e},this.withFrontmatter=function(t){return this.frontmatter=t,e},this.withBodymatter=function(t){return this.bodymatter=t,e},this.withBackmatter=function(t){return this.backmatter=t,e},this.makeEpub=function(){return t.publicationDate=(new Date).toISOString(),r[t.templateName].make(t).then(function(e){i.call(console,"generating epub for: "+t.title);var n=e.generate({type:"blob",mimeType:"application/epub+zip",compression:"DEFLATE"});return n})},this.downloadEpub=function(){e.makeEpub().then(function(e){var n=t.slug+".epub";i.call(console,'saving "'+n+'"...'),saveAs(e,n)})}};if(u.Matter=function(){var e=this;this.sections=[],this.withSection=function(t){return e.sections.push(t),e}},u.Section=function(e,t,n){var i=this;this.id=e,this.content=t,this.includeInToc=n,this.subSections=[],this.withSubSection=function(e){return i.subSections.push(e),i}},"undefined"!=typeof t)t.exports.EpubMaker=u;else if("undefined"!=typeof n)n.EpubMaker=u;else if("undefined"==typeof window)throw new Error("unable to expose EpubMaker: no module, exports object and no global window detected");"undefined"!=typeof window&&(window.EpubMaker=u)}()},{"../src/js/template-builders/idpf-wasteland-builder.js":3,"./js/slugify.js":2}],2:[function(e,t,n){!function(){function e(e){return e.toLowerCase().replace(/\s/g,"-")}if(t.exports="undefined"!=typeof s&&s.slugify?s.slugify:e,t.exports===e){var n="undefined"!=typeof console&&console.debug?console.debug:function(){};n.call(console,"underscore.string not found, falling back on (very) simple slugify..")}}()},{}],3:[function(e,t,n){!function(){"use strict";var e="dist/epub_templates/from_idpf_epub3/wasteland",i=function(){function t(t,n){return $.get(e+"/mimetype",function(e){t.file("mimetype",e)},"text")}function n(t,n){return $.get(e+"/META-INF/container.xml",function(e){t.folder("META-INF").file("container.xml",Handlebars.compile(e)(n))},"text")}function i(t,n){return $.get(e+"/EPUB/wasteland.opf",function(e){t.folder("EPUB").file(n.slug+".opf",Handlebars.compile(e)(n))},"text")}function o(t,n){var i=$.Deferred();return n.cover?JSZipUtils.getBinaryContent(e+"/EPUB/wasteland-cover.jpg",function(e,o){e?i.reject(e):(t.folder("EPUB").file(n.slug+"-cover.jpg",o,{binary:!0}),i.resolve(""))}):i.resolve(""),i.promise()}function r(t,n){return $.get(e+"/EPUB/wasteland.ncx",function(e){t.folder("EPUB").file(n.slug+".ncx",Handlebars.compile(e)(n))},"text")}function u(t,n){return $.get(e+"/EPUB/wasteland-nav.xhtml",function(e){t.folder("EPUB").file(n.slug+"-nav.xhtml",Handlebars.compile(e)(n))},"text")}function s(t,n){return $.when($.get(e+"/EPUB/wasteland.css",function(e){t.folder("EPUB").file(n.slug+".css",Handlebars.compile(e)(n))},"text"),$.get(e+"/EPUB/wasteland-night.css",function(e){t.folder("EPUB").file(n.slug+"-night.css",Handlebars.compile(e)(n))},"text"))}function f(t,n){return $.get(e+"/EPUB/wasteland-content.xhtml",function(e){t.folder("EPUB").file(n.slug+"-content.xhtml",Handlebars.compile(e)(n))},"text")}this.make=function(e){console.debug("building epub",e);var l=new JSZip,c=$.Deferred();return $.when(t(l,e),n(l,e),i(l,e),o(l,e),r(l,e),u(l,e),s(l,e),f(l,e)).then(function(){c.resolve(l)}),c.promise()}};if("undefined"!=typeof t)t.exports.builder=new i;else if("undefined"!=typeof n)n.builder=new i;else if("undefined"==typeof window)throw new Error("unable to expose module: no module, exports object and no global window detected");"undefined"!=typeof window&&(window.epubMaker=new i)}()},{}]},{},[1]);